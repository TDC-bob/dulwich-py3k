<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>dulwich.server.ProtocolGraphWalker : API documentation</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link href="apidocs.css" type="text/css" rel="stylesheet" />
    
    
  </head>
  <body>
    <h1 class="class">d.s.ProtocolGraphWalker(<span title="object">object</span>) : class documentation</h1>
    <p>
      <span id="part">Part of <a href="dulwich.html">dulwich</a>.<a href="dulwich.server.html">server</a></span>
      
      <a href="classIndex.html#dulwich.server.ProtocolGraphWalker">View In Hierarchy</a>
    </p>
    <div>
      
    </div>
    <div>A graph walker that knows the git protocol.</p>
<p>As a graph walker, this class implements ack(), next(), and reset(). It
also contains some base methods for interacting with the wire and walking
the commit tree.</p>
<p>The work of determining which acks to send is passed on to the
implementation instance stored in _impl. The reason for this is that we do
not know at object creation time what ack level the protocol requires. A
call to set_ack_level() is required to set up the implementation, before any
calls to next() or ack() are made.<table class="fieldTable"></table></div>

    
    
    <div id="splitTables">
      <table class="children sortable" id="id249">
  
  
<tr class="method">
    
    
    <td>Method</td>
    <td><a href="dulwich.server.ProtocolGraphWalker.html#__init__">__init__</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="dulwich.server.ProtocolGraphWalker.html#determine_wants">determine_wants</a></td>
    <td><span>Determine the wants for a set of heads.</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="dulwich.server.ProtocolGraphWalker.html#ack">ack</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="dulwich.server.ProtocolGraphWalker.html#reset">reset</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="dulwich.server.ProtocolGraphWalker.html#__next__">__next__</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="dulwich.server.ProtocolGraphWalker.html#read_proto_line">read_proto_line</a></td>
    <td><span>Read a line from the wire.</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="dulwich.server.ProtocolGraphWalker.html#send_ack">send_ack</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="dulwich.server.ProtocolGraphWalker.html#send_nak">send_nak</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="dulwich.server.ProtocolGraphWalker.html#set_wants">set_wants</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="dulwich.server.ProtocolGraphWalker.html#all_wants_satisfied">all_wants_satisfied</a></td>
    <td><span>Check whether all the current wants are satisfied by a set of haves.</span></td>
  </tr><tr class="method">
    
    
    <td>Method</td>
    <td><a href="dulwich.server.ProtocolGraphWalker.html#set_ack_type">set_ack_type</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method private">
    
    
    <td>Method</td>
    <td><a href="dulwich.server.ProtocolGraphWalker.html#_is_satisfied">_is_satisfied</a></td>
    <td><span>Check whether a want is satisfied by a set of haves.</span></td>
  </tr>
  
</table>
      
      
    </div>
    
    
    

    <div class="function">
  <a name="dulwich.server.ProtocolGraphWalker.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    def
    __init__(self, handler, object_store, get_peeled):
    
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="dulwich.server.ProtocolGraphWalker.determine_wants">
    
  </a>
  <a name="determine_wants">
    
  </a>
  <div class="functionHeader">
    
    def
    determine_wants(self, heads):
    
  </div>
  <div class="functionBody">
    
    <div>Determine the wants for a set of heads.</p>
<p>The given heads are advertised to the client, who then specifies which
refs he wants using 'want' lines. This portion of the protocol is the
same regardless of ack type, and in fact is used to set the ack type of
the ProtocolGraphWalker.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">heads</td><td>a dict of refname-&gt;SHA1 to advertise</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">a list of SHA1s requested by the client</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="dulwich.server.ProtocolGraphWalker.ack">
    
  </a>
  <a name="ack">
    
  </a>
  <div class="functionHeader">
    
    def
    ack(self, have_ref):
    
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="dulwich.server.ProtocolGraphWalker.reset">
    
  </a>
  <a name="reset">
    
  </a>
  <div class="functionHeader">
    
    def
    reset(self):
    
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="dulwich.server.ProtocolGraphWalker.__next__">
    
  </a>
  <a name="__next__">
    
  </a>
  <div class="functionHeader">
    
    def
    __next__(self):
    
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="dulwich.server.ProtocolGraphWalker.read_proto_line">
    
  </a>
  <a name="read_proto_line">
    
  </a>
  <div class="functionHeader">
    
    def
    read_proto_line(self, allowed):
    
  </div>
  <div class="functionBody">
    
    <div>Read a line from the wire.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">allowed</td><td>An iterable of command names that should be allowed.</td></tr><tr class="fieldStart"><td class="fieldName">Returns</td><td colspan="2">A tuple of (command, value); see _split_proto_line.</td></tr><tr class="fieldStart"><td class="fieldName">Raises</td><td class="fieldArg">GitProtocolError</td><td>If an error occurred reading the line.</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="dulwich.server.ProtocolGraphWalker.send_ack">
    
  </a>
  <a name="send_ack">
    
  </a>
  <div class="functionHeader">
    
    def
    send_ack(self, sha, ack_type=''):
    
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="dulwich.server.ProtocolGraphWalker.send_nak">
    
  </a>
  <a name="send_nak">
    
  </a>
  <div class="functionHeader">
    
    def
    send_nak(self):
    
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="dulwich.server.ProtocolGraphWalker.set_wants">
    
  </a>
  <a name="set_wants">
    
  </a>
  <div class="functionHeader">
    
    def
    set_wants(self, wants):
    
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="dulwich.server.ProtocolGraphWalker._is_satisfied">
    
  </a>
  <a name="_is_satisfied">
    
  </a>
  <div class="functionHeader">
    
    def
    _is_satisfied(self, haves, want, earliest):
    
  </div>
  <div class="functionBody">
    
    <div>Check whether a want is satisfied by a set of haves.</p>
<p>A want, typically a branch tip, is &quot;satisfied&quot; only if there exists a
path back from that want to one of the haves.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">haves</td><td>A set of commits we know the client has.</td></tr><tr><td></td><td class="fieldArg">want</td><td>The want to check satisfaction for.</td></tr><tr><td></td><td class="fieldArg">earliest</td><td>A timestamp beyond which the search for haves will be
terminated, presumably because we're searching too far down the
wrong branch.</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="dulwich.server.ProtocolGraphWalker.all_wants_satisfied">
    
  </a>
  <a name="all_wants_satisfied">
    
  </a>
  <div class="functionHeader">
    
    def
    all_wants_satisfied(self, haves):
    
  </div>
  <div class="functionBody">
    
    <div>Check whether all the current wants are satisfied by a set of haves.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName">Parameters</td><td class="fieldArg">haves</td><td>A set of commits we know the client has.</td></tr><tr class="fieldStart"><td class="fieldName">Note</td><td colspan="2">Wants are specified with set_wants rather than passed in since
in the current interface they are determined outside this class.</td></tr></table></div>
  </div>
</div><div class="function">
  <a name="dulwich.server.ProtocolGraphWalker.set_ack_type">
    
  </a>
  <a name="set_ack_type">
    
  </a>
  <div class="functionHeader">
    
    def
    set_ack_type(self, ack_type):
    
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div>
    <address>
      <a href="index.html">API Documentation</a> for <a href="http://samba.org/~jelmer/dulwich/">Dulwich</a>, generated by <a href="http://codespeak.net/~mwh/pydoctor/">pydoctor</a> at 2011-11-20 14:50:00.
    </address>
  </body>
</html>