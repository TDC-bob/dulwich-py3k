<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>dulwich.diff_tree : API documentation</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link href="apidocs.css" type="text/css" rel="stylesheet" />
    
    
  </head>
  <body>
    <h1 class="module">d.diff_tree : module documentation</h1>
    <p>
      <span id="part">Part of <a href="dulwich.html">dulwich</a></span>
      
      
    </p>
    <div>
      
    </div>
    <pre>Utilities for diffing files and trees.</pre>

    
    
    <div id="splitTables">
      <table class="children sortable" id="id354">
  
  
<tr class="class">
    
    
    <td>Class</td>
    <td><a href="dulwich.diff_tree.TreeChange.html">TreeChange</a></td>
    <td><tt>Named tuple a single change between two trees.</tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="dulwich.diff_tree.html#walk_trees">walk_trees</a></td>
    <td><tt>Recursively walk all the entries of two trees.</tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="dulwich.diff_tree.html#tree_changes">tree_changes</a></td>
    <td><tt>Find the differences between the contents of two trees.</tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="dulwich.diff_tree.html#tree_changes_for_merge">tree_changes_for_merge</a></td>
    <td><tt>Get the tree changes for a merge tree relative to all its parents.</tt></td>
  </tr><tr class="class">
    
    
    <td>Class</td>
    <td><a href="dulwich.diff_tree.RenameDetector.html">RenameDetector</a></td>
    <td><tt>Object for handling rename detection between two trees.</tt></td>
  </tr><tr class="function private">
    
    
    <td>Function</td>
    <td><a href="dulwich.diff_tree.html#_tree_entries">_tree_entries</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function private">
    
    
    <td>Function</td>
    <td><a href="dulwich.diff_tree.html#_merge_entries">_merge_entries</a></td>
    <td><tt>Merge the entries of two trees.</tt></td>
  </tr><tr class="function private">
    
    
    <td>Function</td>
    <td><a href="dulwich.diff_tree.html#_is_tree">_is_tree</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function private">
    
    
    <td>Function</td>
    <td><a href="dulwich.diff_tree.html#_skip_tree">_skip_tree</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function private">
    
    
    <td>Function</td>
    <td><a href="dulwich.diff_tree.html#_all_eq">_all_eq</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function private">
    
    
    <td>Function</td>
    <td><a href="dulwich.diff_tree.html#_all_same">_all_same</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function private">
    
    
    <td>Function</td>
    <td><a href="dulwich.diff_tree.html#_count_blocks">_count_blocks</a></td>
    <td><tt>Count the blocks in an object.</tt></td>
  </tr><tr class="function private">
    
    
    <td>Function</td>
    <td><a href="dulwich.diff_tree.html#_common_bytes">_common_bytes</a></td>
    <td><tt>Count the number of common bytes in two block count dicts.</tt></td>
  </tr><tr class="function private">
    
    
    <td>Function</td>
    <td><a href="dulwich.diff_tree.html#_similarity_score">_similarity_score</a></td>
    <td><tt>Compute a similarity score for two objects.</tt></td>
  </tr><tr class="function private">
    
    
    <td>Function</td>
    <td><a href="dulwich.diff_tree.html#_tree_change_key">_tree_change_key</a></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
  
</table>
      
      
    </div>
    
    
    

    <div class="function">
  <a name="dulwich.diff_tree._tree_entries">
    
  </a>
  <a name="_tree_entries">
    
  </a>
  <div class="functionHeader">
    
    def
    _tree_entries(path, tree):
    
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="dulwich.diff_tree._merge_entries">
    
  </a>
  <a name="_merge_entries">
    
  </a>
  <div class="functionHeader">
    
    def
    _merge_entries(path, tree1, tree2):
    
  </div>
  <div class="functionBody">
    
    <pre>Merge the entries of two trees.

:param path: A path to prepend to all tree entry names.
:param tree1: The first Tree object to iterate, or None.
:param tree2: The second Tree object to iterate, or None.
:return: A list of pairs of TreeEntry objects for each pair of entries in
    the trees. If an entry exists in one tree but not the other, the other
    entry will have all attributes set to None. If neither entry's path is
    None, they are guaranteed to match.</pre>
  </div>
</div><div class="function">
  <a name="dulwich.diff_tree._is_tree">
    
  </a>
  <a name="_is_tree">
    
  </a>
  <div class="functionHeader">
    
    def
    _is_tree(entry):
    
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="dulwich.diff_tree.walk_trees">
    
  </a>
  <a name="walk_trees">
    
  </a>
  <div class="functionHeader">
    
    def
    walk_trees(store, tree1_id, tree2_id, prune_identical=False):
    
  </div>
  <div class="functionBody">
    
    <pre>Recursively walk all the entries of two trees.

Iteration is depth-first pre-order, as in e.g. os.walk.

:param store: An ObjectStore for looking up objects.
:param tree1_id: The SHA of the first Tree object to iterate, or None.
:param tree2_id: The SHA of the second Tree object to iterate, or None.
:param prune_identical: If True, identical subtrees will not be walked.
:return: Iterator over Pairs of TreeEntry objects for each pair of entries
    in the trees and their subtrees recursively. If an entry exists in one
    tree but not the other, the other entry will have all attributes set
    to None. If neither entry's path is None, they are guaranteed to
    match.</pre>
  </div>
</div><div class="function">
  <a name="dulwich.diff_tree._skip_tree">
    
  </a>
  <a name="_skip_tree">
    
  </a>
  <div class="functionHeader">
    
    def
    _skip_tree(entry):
    
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="dulwich.diff_tree.tree_changes">
    
  </a>
  <a name="tree_changes">
    
  </a>
  <div class="functionHeader">
    
    def
    tree_changes(store, tree1_id, tree2_id, want_unchanged=False, rename_detector=None):
    
  </div>
  <div class="functionBody">
    
    <pre>Find the differences between the contents of two trees.

:param store: An ObjectStore for looking up objects.
:param tree1_id: The SHA of the source tree.
:param tree2_id: The SHA of the target tree.
:param want_unchanged: If True, include TreeChanges for unmodified entries
    as well.
:param rename_detector: RenameDetector object for detecting renames.
:return: Iterator over TreeChange instances for each change between the
    source and target tree.</pre>
  </div>
</div><div class="function">
  <a name="dulwich.diff_tree._all_eq">
    
  </a>
  <a name="_all_eq">
    
  </a>
  <div class="functionHeader">
    
    def
    _all_eq(seq, key, value):
    
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="dulwich.diff_tree._all_same">
    
  </a>
  <a name="_all_same">
    
  </a>
  <div class="functionHeader">
    
    def
    _all_same(seq, key):
    
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div><div class="function">
  <a name="dulwich.diff_tree.tree_changes_for_merge">
    
  </a>
  <a name="tree_changes_for_merge">
    
  </a>
  <div class="functionHeader">
    
    def
    tree_changes_for_merge(store, parent_tree_ids, tree_id, rename_detector=None):
    
  </div>
  <div class="functionBody">
    
    <pre>Get the tree changes for a merge tree relative to all its parents.

:param store: An ObjectStore for looking up objects.
:param parent_tree_ids: An iterable of the SHAs of the parent trees.
:param tree_id: The SHA of the merge tree.
:param rename_detector: RenameDetector object for detecting renames.

:yield: Lists of TreeChange objects, one per conflicted path in the merge.

    Each list contains one element per parent, with the TreeChange for that
    path relative to that parent. An element may be None if it never existed
    in one parent and was deleted in two others.

    A path is only included in the output if it is a conflict, i.e. its SHA
    in the merge tree is not found in any of the parents, or in the case of
    deletes, if not all of the old SHAs match.</pre>
  </div>
</div><div class="function">
  <a name="dulwich.diff_tree._count_blocks">
    
  </a>
  <a name="_count_blocks">
    
  </a>
  <div class="functionHeader">
    
    def
    _count_blocks(obj):
    
  </div>
  <div class="functionBody">
    
    <pre>Count the blocks in an object.

Splits the data into blocks either on lines or &lt;=64-byte chunks of lines.

:param obj: The object to count blocks for.
:return: A dict of block hashcode -&gt; total bytes occurring.</pre>
  </div>
</div><div class="function">
  <a name="dulwich.diff_tree._common_bytes">
    
  </a>
  <a name="_common_bytes">
    
  </a>
  <div class="functionHeader">
    
    def
    _common_bytes(blocks1, blocks2):
    
  </div>
  <div class="functionBody">
    
    <pre>Count the number of common bytes in two block count dicts.

:param block1: The first dict of block hashcode -&gt; total bytes.
:param block2: The second dict of block hashcode -&gt; total bytes.
:return: The number of bytes in common between blocks1 and blocks2. This is
    only approximate due to possible hash collisions.</pre>
  </div>
</div><div class="function">
  <a name="dulwich.diff_tree._similarity_score">
    
  </a>
  <a name="_similarity_score">
    
  </a>
  <div class="functionHeader">
    
    def
    _similarity_score(obj1, obj2, block_cache=None):
    
  </div>
  <div class="functionBody">
    
    <pre>Compute a similarity score for two objects.

:param obj1: The first object to score.
:param obj2: The second object to score.
:param block_cache: An optional dict of SHA to block counts to cache results
    between calls.
:return: The similarity score between the two objects, defined as the number
    of bytes in common between the two objects divided by the maximum size,
    scaled to the range 0-100.</pre>
  </div>
</div><div class="function">
  <a name="dulwich.diff_tree._tree_change_key">
    
  </a>
  <a name="_tree_change_key">
    
  </a>
  <div class="functionHeader">
    
    def
    _tree_change_key(entry):
    
  </div>
  <div class="functionBody">
    
    <div class="undocumented">Undocumented</div>
  </div>
</div>
    <address>
      <a href="index.html">API Documentation</a> for <a href="http://samba.org/~jelmer/dulwich/">Dulwich</a>, generated by <a href="http://codespeak.net/~mwh/pydoctor/">pydoctor</a> at 2011-11-25 13:37:30.
    </address>
  </body>
</html>