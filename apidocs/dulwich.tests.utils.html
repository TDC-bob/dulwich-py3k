<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "DTD/xhtml1-strict.dtd">
<html>
  <head>
    <title>dulwich.tests.utils : API documentation</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <link href="apidocs.css" type="text/css" rel="stylesheet" />
    
    
  </head>
  <body>
    <h1 class="module">d.t.utils : module documentation</h1>
    <p>
      <span id="part">Part of <a href="dulwich.html">dulwich</a>.<a href="dulwich.tests.html">tests</a></span>
      
      
    </p>
    <div>
      
    </div>
    <pre>Utility functions common to Dulwich tests.</pre>

    
    
    <div id="splitTables">
      <table class="children sortable" id="id238">
  
  
<tr class="function">
    
    
    <td>Function</td>
    <td><a href="dulwich.tests.utils.html#open_repo">open_repo</a></td>
    <td><tt>Open a copy of a repo in a temporary directory.</tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="dulwich.tests.utils.html#tear_down_repo">tear_down_repo</a></td>
    <td><tt>Tear down a test repository.</tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="dulwich.tests.utils.html#make_object">make_object</a></td>
    <td><tt>Make an object for testing and assign some members.</tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="dulwich.tests.utils.html#make_commit">make_commit</a></td>
    <td><tt>Make a Commit object with a default set of members.</tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="dulwich.tests.utils.html#functest_builder">functest_builder</a></td>
    <td><tt>Generate a test method that tests the given function.</tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="dulwich.tests.utils.html#ext_functest_builder">ext_functest_builder</a></td>
    <td><tt>Generate a test method that tests the given extension function.</tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="dulwich.tests.utils.html#build_pack">build_pack</a></td>
    <td><tt>Write test pack data from a concise spec.</tt></td>
  </tr><tr class="function">
    
    
    <td>Function</td>
    <td><a href="dulwich.tests.utils.html#build_commit_graph">build_commit_graph</a></td>
    <td><tt>Build a commit graph from a concise specification.</tt></td>
  </tr>
  
</table>
      
      
    </div>
    
    
    

    <div class="function">
  <a name="dulwich.tests.utils.open_repo">
    
  </a>
  <a name="open_repo">
    
  </a>
  <div class="functionHeader">
    
    def
    open_repo(name):
    
  </div>
  <div class="functionBody">
    
    <pre>Open a copy of a repo in a temporary directory.

Use this function for accessing repos in dulwich/tests/data/repos to avoid
accidentally or intentionally modifying those repos in place. Use
tear_down_repo to delete any temp files created.

:param name: The name of the repository, relative to
    dulwich/tests/data/repos
:returns: An initialized Repo object that lives in a temporary directory.</pre>
  </div>
</div><div class="function">
  <a name="dulwich.tests.utils.tear_down_repo">
    
  </a>
  <a name="tear_down_repo">
    
  </a>
  <div class="functionHeader">
    
    def
    tear_down_repo(repo):
    
  </div>
  <div class="functionBody">
    
    <pre>Tear down a test repository.</pre>
  </div>
</div><div class="function">
  <a name="dulwich.tests.utils.make_object">
    
  </a>
  <a name="make_object">
    
  </a>
  <div class="functionHeader">
    
    def
    make_object(cls, **attrs):
    
  </div>
  <div class="functionBody">
    
    <pre>Make an object for testing and assign some members.

This method creates a new subclass to allow arbitrary attribute
reassignment, which is not otherwise possible with objects having __slots__.

:param attrs: dict of attributes to set on the new object.
:return: A newly initialized object of type cls.</pre>
  </div>
</div><div class="function">
  <a name="dulwich.tests.utils.make_commit">
    
  </a>
  <a name="make_commit">
    
  </a>
  <div class="functionHeader">
    
    def
    make_commit(**attrs):
    
  </div>
  <div class="functionBody">
    
    <pre>Make a Commit object with a default set of members.

:param attrs: dict of attributes to overwrite from the default values.
:return: A newly initialized Commit object.</pre>
  </div>
</div><div class="function">
  <a name="dulwich.tests.utils.functest_builder">
    
  </a>
  <a name="functest_builder">
    
  </a>
  <div class="functionHeader">
    
    def
    functest_builder(method, func):
    
  </div>
  <div class="functionBody">
    
    <pre>Generate a test method that tests the given function.</pre>
  </div>
</div><div class="function">
  <a name="dulwich.tests.utils.ext_functest_builder">
    
  </a>
  <a name="ext_functest_builder">
    
  </a>
  <div class="functionHeader">
    
    def
    ext_functest_builder(method, func):
    
  </div>
  <div class="functionBody">
    
    <pre>Generate a test method that tests the given extension function.

This is intended to generate test methods that test both a pure-Python
version and an extension version using common test code. The extension test
will raise SkipTest if the extension is not found.

Sample usage:

class MyTest(TestCase);
    def _do_some_test(self, func_impl):
        self.assertEqual('foo', func_impl())

    test_foo = functest_builder(_do_some_test, foo_py)
    test_foo_extension = ext_functest_builder(_do_some_test, _foo_c)

:param method: The method to run. It must must two parameters, self and the
    function implementation to test.
:param func: The function implementation to pass to method.</pre>
  </div>
</div><div class="function">
  <a name="dulwich.tests.utils.build_pack">
    
  </a>
  <a name="build_pack">
    
  </a>
  <div class="functionHeader">
    
    def
    build_pack(f, objects_spec, store=None):
    
  </div>
  <div class="functionBody">
    
    <pre>Write test pack data from a concise spec.

:param f: A file-like object to write the pack to.
:param objects_spec: A list of (type_num, obj). For non-delta types, obj
    is the string of that object's data.
    For delta types, obj is a tuple of (base, data), where:

    * base can be either an index in objects_spec of the base for that
    * delta; or for a ref delta, a SHA, in which case the resulting pack
    * will be thin and the base will be an external ref.
    * data is a string of the full, non-deltified data for that object.

    Note that offsets/refs and deltas are computed within this function.
:param store: An optional ObjectStore for looking up external refs.
:return: A list of tuples in the order specified by objects_spec:
    (offset, type num, data, sha, CRC32)</pre>
  </div>
</div><div class="function">
  <a name="dulwich.tests.utils.build_commit_graph">
    
  </a>
  <a name="build_commit_graph">
    
  </a>
  <div class="functionHeader">
    
    def
    build_commit_graph(object_store, commit_spec, trees=None, attrs=None):
    
  </div>
  <div class="functionBody">
    
    <pre>Build a commit graph from a concise specification.

Sample usage:
&gt;&gt;&gt; c1, c2, c3 = build_commit_graph(store, [[1], [2, 1], [3, 1, 2]])
&gt;&gt;&gt; store[store[c3].parents[0]] == c1
True
&gt;&gt;&gt; store[store[c3].parents[1]] == c2
True

If not otherwise specified, commits will refer to the empty tree and have
commit times increasing in the same order as the commit spec.

:param object_store: An ObjectStore to commit objects to.
:param commit_spec: An iterable of iterables of ints defining the commit
    graph. Each entry defines one commit, and entries must be in topological
    order. The first element of each entry is a commit number, and the
    remaining elements are its parents. The commit numbers are only
    meaningful for the call to make_commits; since real commit objects are
    created, they will get created with real, opaque SHAs.
:param trees: An optional dict of commit number -&gt; tree spec for building
    trees for commits. The tree spec is an iterable of (path, blob, mode) or
    (path, blob) entries; if mode is omitted, it defaults to the normal file
    mode (0100644).
:param attrs: A dict of commit number -&gt; (dict of attribute -&gt; value) for
    assigning additional values to the commits.
:return: The list of commit objects created.
:raise ValueError: If an undefined commit identifier is listed as a parent.</pre>
  </div>
</div>
    <address>
      <a href="index.html">API Documentation</a> for <a href="http://samba.org/~jelmer/dulwich/">Dulwich</a>, generated by <a href="http://codespeak.net/~mwh/pydoctor/">pydoctor</a> at 2011-11-25 13:37:30.
    </address>
  </body>
</html>